@section Styles
    {
    <!-- DataTables -->
    <link href="~/assets/libs/datatables.net-bs4/css/dataTables.bootstrap4.min.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/libs/datatables.net-buttons-bs4/css/buttons.bootstrap4.min.css" rel="stylesheet" type="text/css" />

    <!-- Responsive datatable examples -->
    <link href="~/assets/libs/datatables.net-responsive-bs4/css/responsive.bootstrap4.min.css" rel="stylesheet" type="text/css" />
}

<div class="row">
    <div class="col-12">
        <div class="page-title-box d-flex align-items-center justify-content-between">
            <h4 class="mb-0">Tecrübeler</h4>

            <div class="page-title-right">
                <ol class="breadcrumb m-0">
                    <li class="breadcrumb-item"><a href="javascript: void(0);">İşlemler</a></li>
                    <li class="breadcrumb-item active">Tecrübeler</li>
                </ol>
            </div>

        </div>
    </div>
</div>


<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-body">

                <h4 class="card-title">Tecrübeler</h4>
                <button type="button" class="btn btn-success waves-effect waves-light" data-bs-toggle="modal" data-bs-target="#modal">Yeni Ekle</button>
                <p class="card-title-desc">
                    Bu ekranda iş tecrübelerinizi ekleyebilir ve düzenleyebilirsiniz.
                </p>

                <table id="datatable" class="table table-striped table-bordered dt-responsive nowrap" style="border-collapse: collapse; border-spacing: 0; width: 100%;">
                    <thead>
                        <tr>
                            <th>Tecrübe Adı</th>
                            <th>Başlangıç Tarihi</th>
                            <th>Çıkış Tarihi</th>
                            <th>Lokasyon</th>
                            <th>Şirket Adı</th>
                            <th>Şirket Açıklaması</th>
                            <th>Pozisyon</th>
                            <th>İş Açıklaması</th>
                            <th>Tablo İşlemleri</th>

                        </tr>
                    </thead>


                    <tbody>
                    </tbody>
                </table>
            </div>
        </div>

    </div> <!-- end col -->
</div> <!-- end row -->




<div id="modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="myModalLabel">Yeni İş Tecrübesi Ekle</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                </button>
            </div>
            <div class="modal-body">
                <div class="mb-3 row">
                    <label for="txtExpName" class="col-md-4 col-form-label">Tecrübe Adı</label>
                    <div class="col-md-8">
                        <input class="form-control" type="text" placeholder="Tecrübe adı giriniz" name="txtExpName" id="txtExpName">
                    </div>
                </div>

                <div class="mb-3 row">
                    <label for="dateStarted" class="col-md-6 col-form-label">İşe Başlangıç Tarihi</label>
                    <div class="col-md-6">
                        <input type="date" placeholder="" name="dateStarted" id="dateStarted">
                    </div>
                </div>
                <div class="mb-3 row">
                    <label for="dateEnded" class="col-md-6 col-form-label">İşten Çıkış Tarihi</label>
                    <div class="col-md-6">
                        <input type="date" placeholder="" name="dateEnded" id="dateEnded">
                    </div>
                    <div class="col-md-12">
                        <input class="form-check-input" type="checkbox" value="" id="continousDate">
                        <label class="form-check-label" for="continousDate">Devam ediyor.</label>
                    </div>
                </div>
                <div class="mb-3 row">
                    <label for="city" class="col-md-6 col-form-label">Şehir seçiniz</label>
                    <div class="col-md-6">
                        <select id="city" name="city">
                            <option value="paris">İstanbul</option>
                            <option value="london">Ankara</option>
                            <option value="athens">Adana</option>
                            <option value="madrid">Çanakkale</option>
                        </select>
                    </div>
                </div>
                <div class="mb-3 row">
                    <label for="txtCompanyName" class="col-md-4 col-form-label">Şirket Adı</label>
                    <div class="col-md-8">
                        <input class="form-control" type="text" placeholder="Şirket adı giriniz" name="txtCompanyName" id="txtCompanyName">
                    </div>
                </div>
                <div class="mb-3 row">
                    <label for="txtCompanyDescription" class="col-md-4 col-form-label">Şirket Açıklaması</label>
                    <div class="col-md-8">
                        <input class="form-control" type="text" placeholder="Şirket Hakkında Açıklama" name="txtCompanyDescription" id="txtCompanyDescription">
                    </div>
                </div>
                <div class="mb-3 row">
                    <label for="txtPosition" class="col-md-4 col-form-label">Pozisyon Adı</label>
                    <div class="col-md-8">
                        <input class="form-control" type="text" placeholder="Pozisyon adı giriniz" name="txtPosition" id="txtPosition">
                    </div>
                </div>
                <div class="mb-3 row">
                    <label for="txtPositionDescription" class="col-md-4 col-form-label">Pozisyon Hakkında Açıklama Giriniz</label>
                    <div class="col-md-8">
                        <input class="form-control" type="text" placeholder="İş açıklaması giriniz" name="txtPositionDescription" id="txtPositionDescription">
                    </div>
                </div>



            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-light waves-effect" data-bs-dismiss="modal">Kapat</button>
                <button type="button" id="btnConfirm" class="btn btn-primary waves-effect waves-light">Ekle</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
@section Scripts {
    <!-- Required datatable js -->
    <script src="~/assets/libs/datatables.net/js/jquery.dataTables.min.js"></script>
    <script src="~/assets/libs/datatables.net-bs4/js/dataTables.bootstrap4.min.js"></script>
    <!-- Buttons examples -->
    <script src="~/assets/libs/datatables.net-buttons/js/dataTables.buttons.min.js"></script>
    <script src="~/assets/libs/datatables.net-buttons-bs4/js/buttons.bootstrap4.min.js"></script>
    <script src="~/assets/libs/jszip/jszip.min.js"></script>
    <script src="~/assets/libs/pdfmake/build/pdfmake.min.js"></script>
    <script src="~/assets/libs/pdfmake/build/vfs_fonts.js"></script>
    <script src="~/assets/libs/datatables.net-buttons/js/buttons.html5.min.js"></script>
    <script src="~/assets/libs/datatables.net-buttons/js/buttons.print.min.js"></script>
    <script src="~/assets/libs/datatables.net-buttons/js/buttons.colVis.min.js"></script>

    <!-- Responsive examples -->
    <script src="~/assets/libs/datatables.net-responsive/js/dataTables.responsive.min.js"></script>
    <script src="~/assets/libs/datatables.net-responsive-bs4/js/responsive.bootstrap4.min.js"></script>

    <script type="text/javascript">
        var _Datatable;
        $(document).ready(function () {
            loadTable();
        });

        function loadTable() {
            var dataTable = $("#datatable").DataTable(
                {

                    ajax: "@Url.Action("GetAll","Experience")",
                    columns: [
                        { data: 'name' },
                        { data: 'startingDate' },
                        { data: 'endingDate' },
                        { data: 'location' },
                        { data: 'companyName' },
                        { data: 'companyDescription' },
                        { data: 'position' },
                        { data: 'positionDescription' },
                        {
                            data: 'id', render: function (data, type) {
                                return `<a id="btnDelete-${data}" onClick="deleteExperience('${data}')" class="btn btn-danger"> Sil </a> <a onClick="editExperience('${data}')" class="btn btn-info">Düzenle</a>`;
                            }
                        }

                    ]
                }
            );
            _dataTable = dataTable;
        }

        $("#btnConfirm").on('click', function (event) {

            var checkbox = $("#continousDate").is(':checked');
            var endDate;
            if (checkbox == true) {
                endDate == null;
            } else
            {
                endDate = $("#dateEnded").val();
            }

            var veri = {
                name: $("#txtExpName").val(),
                startingDate: $("#dateStarted").val(),
                endingDate:endDate,
                location:$("#city option:selected").text(),
                companyName :$("#txtCompanyName").val(),
                companyDescription:$("#txtCompanyDescription").val(),

            };

            $.ajax({

            });
        });




    </script>









}